'use strict';mix_d("P13NSCCards__p13n-desktop-carousel:p13n-desktop-carousel__m-PPdmfv","exports tslib @p/A @c/aui-carousel @c/dom @c/remote-operations @c/scoped-dom @p/a-carousel-framework @c/metrics @c/logger @c/aui-utils @c/aui-untrusted-ajax @c/browser-operations".split(" "),function(Q,p,X,Y,Z,aa,ba,ca,K,da,ea,fa,ha){function C(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var w=C(X),ia=C(Y),E=C(aa),u=C(ba),ja=C(ca),x=C(da),L=C(ea),R=C(fa),ka=C(ha),la=function(a){var c=function(d){d.popover&&
d.popover.getContent&&(d=d.popover.getContent(),w["default"].loadDescendantImagesManually(d))},b=function(d,g){g={$event:{preventDefault:w["default"].$.noop,stopPropagation:w["default"].$.noop},$target:d.getContent().find('[data-a-tab-name="'+g+'"]'),data:{name:"energyEfficiencyTabSet"}};w["default"].trigger("a:declarative:a-tabs:click",g);w["default"].on("a:tabs:energyEfficiencyTabSet:select",function(e){switch(e.selectedTab.tabName){case "firstTab":d.$popover.css("width","367px");d.$popover.css("height",
"600px");d.$popover.find(".a-popover-inner").css("height","600px");break;case "secondTab":d.$popover.css("width","800px"),d.$popover.css("height","1100px"),d.$popover.find(".a-popover-inner").css("height","1100px")}})},f=function(d,g){var e=d&&d.$event,m=d&&d.data||{},k=m.activeTabName,t=m.name;e&&e.preventDefault&&e.preventDefault();e&&e.stopPropagation&&e.stopPropagation();e=g.get(t);e||(w["default"].on("a:popover:befo/reshow:"+t,c),e=g.create(d.$target,m));e.show();b(e,k)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",
function(d){w["default"].declarative("card-energy-efficiency-secondary-view","click",function(g){f(g,d)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(d){w["default"].declarative("card-energy-efficiency-modal","click",function(g){f(g,d)})})},ma=function(a){a.when("ready").execute("EEBadgeProductFiche/resize",function(c){var b=w["default"].$;b(".energyEfficiencyContainer").each(function(f,d){f=b(d).find(".energyEfficiencyProductFicheLabel").first();var g=b(d).find("svg").first();
d.offsetWidth<f.width()+g.width()&&(f.removeClass("a-size-small"),f.addClass("a-size-micro"))})})},y=function(a,c){a&&(c?L["default"].show(a):L["default"].hide(a))},M=function(a,c){return(a=c.getElementsByClassName(a))&&1===a.length?a[0]:void 0},F=function(a){K.count(a,(K.count(a)||0)+1)},na=function(){function a(c,b,f,d,g,e,m,k){var t=this;this.throttledScrollAction=w["default"].throttle(function(){return p.__awaiter(t,void 0,void 0,function(){return p.__generator(this,function(h){switch(h.label){case 0:return[4,
this.getNextBatchIfBottomInView()];case 1:return h.sent(),[2]}})})},200);this.containerDataset=this.getContainerDataset(c);this.bottomOfListElement=b;this.containerForInsertion=f;this.insertFetchedItems=d;this.errorFetchingItemsElement=e;this.fetchAsinsRemoteOperation=g;this.spinnerFetchingItemsElement=m;this.batchSize=k||8;this.processingStatus={batchFailureCount:0,currentIndex:Number(c.dataset.indexOffset)||0,individualBatchAttemptsCount:0,isAllContentLoaded:!1,isProcessing:!1}}a.prototype.getContainerDataset=
function(c){if(!c.dataset||!c.dataset.asinList)throw Error("Dataset not p/resent or does not contain required data!");return{asinList:JSON.parse(c.dataset.asinList),linkParameters:c.dataset.linkParameters||"{}",reftag:c.dataset.reftag||"",strategyId:c.dataset.strategyId||"",widgetGroupId:c.dataset.widgetGroupId||""}};a.prototype.getNextItemBatch=function(c){var b=this;this.processingStatus.individualBatchAttemptsCount+=1;this.processingStatus.isProcessing=!0;var f=this.processingStatus.currentIndex;
if(f>=this.containerDataset.asinList.length)return this.processingStatus.isAllContentLoaded=!0,Promise./resolve(void 0);y(this.spinnerFetchingItemsElement,!0);f=this.containerDataset.asinList.slice(f,f+this.batchSize);var d=f.map(function(g,e){return e+b.processingStatus.currentIndex});return this.fetchAsinsRemoteOperation({ids:f,indexes:d,linkparameters:this.containerDataset.linkParameters,offset:d[0].toString(),reftagprefix:this.containerDataset.reftag}).then(function(g){y(b.spinnerFetchingItemsElement,
!1);b.insertFetchedItems(c,g);b.processingStatus.batchFailureCount=0;b.processingStatus.currentIndex+=b.batchSize;b.processingStatus.individualBatchAttemptsCount=0;b.processingStatus.isProcessing=!1}).catch(function(g){console.log("Error fetching items: "+g);if(2<=b.processingStatus.individualBatchAttemptsCount){b.processingStatus.batchFailureCount+=1;if(2<=b.processingStatus.batchFailureCount){b.processingStatus.isProcessing=!0;y(b.spinnerFetchingItemsElement,!1);y(b.errorFetchingItemsElement,!0);
return}b.processingStatus.currentIndex+=b.batchSize}void b.getNextItemBatch(c)})};a.prototype.getNextBatchIfBottomInView=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(c){switch(c.label){case 0:if(this.processingStatus.isProcessing)return[3,3];this.processingStatus.isProcessing=!0;return L["default"].onScreen(this.bottomOfListElement,500)&&!this.processingStatus.isAllContentLoaded&&2>this.processingStatus.batchFailureCount?[4,this.getNextItemBatch(this.containerForInsertion)]:
[3,2];case 1:return c.sent(),[3,3];case 2:this.processingStatus.isProcessing=!1,c.label=3;case 3:return[2]}})})};a.prototype.isInErrorState=function(){return 2<=this.processingStatus.batchFailureCount};a.prototype./resetLazyLoading=function(){this.processingStatus.batchFailureCount=0;y(this.errorFetchingItemsElement,!1)};return a}(),S=function(a,c,b){void 0===c&&(c=function(){});void 0===b&&(b=function(){});return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(f){switch(f.label){case 0:return a.dataset.event?
[4,oa(a.dataset.event,a,c,b)]:[3,2];case 1:return f.sent(),[3,5];case 2:return a.dataset.url?[4,pa(a.dataset.url,c,b)]:[3,4];case 3:return f.sent(),[3,5];case 4:x["default"].log("Element is missing dataset.url or dataset.event attribute"),b(),f.label=5;case 5:return[2]}})})},oa=function(a,c,b,f){return p.__awaiter(void 0,void 0,void 0,function(){var d,g,e,m,k,t;return p.__generator(this,function(h){switch(h.label){case 0:d=function(n){return p.__awaiter(void 0,void 0,void 0,function(){var r,l;return p.__generator(this,
function(q){switch(q.label){case 0:return r=function(v){v?b():(x["default"].log("Failed to call PPDS custom API"),f())},l=function(v){x["default"].log("Caught error when calling PPDS custom API: "+v.stack);f()},[4,n().then(r).catch(l)];case 1:return q.sent(),[2]}})})};g=function(n){return p.__awaiter(void 0,void 0,void 0,function(){var r;return p.__generator(this,function(l){switch(l.label){case 0:if(!c.dataset.asin)return[3,2];r={asin:c.dataset.asin};return[4,d(n.bind(null,r))];case 1:return l.sent(),
[3,3];case 2:x["default"].log("Element was missing required data: asin"),f(),l.label=3;case 3:return[2]}})})};e=a;switch(e){case "NOT_INTE/resTED":return[3,1];case "DELETE_NOT_INTE/resTED":return[3,5]}return[3,7];case 1:if(!c.dataset.asin)return[3,3];m={asin:c.dataset.asin,reason:c.dataset.reason,strategyId:c.dataset.strategyId||c.dataset.strategyid,widgetGroupId:c.dataset.widgetGroupId||c.dataset.widgetgroupid};k=E["default"].setup(["recordNotInte/rested"]);return[4,d(k.recordNotInte/rested.bind(null,
m))];case 2:return h.sent(),[3,4];case 3:x["default"].log("Element was missing required data: asin"),f(),h.label=4;case 4:return[3,8];case 5:return t=E["default"].setup(["deleteNotInte/rested"]),[4,g(t.deleteNotInte/rested)];case 6:return h.sent(),[3,8];case 7:return x["default"].log("Invalid PPDS event type: "+a),f(),[3,8];case 8:return[2]}})})},pa=function(a,c,b){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(f){switch(f.label){case 0:return[4,R["default"].post(a,
{accepts:"text/html,*/*",contentType:"application/x-www-form-urlencoded"}).then(function(){c()}).catch(function(d){x["default"].log("Failed to call AJAX endpoint "+a+" with error: "+d.message,"ERROR");b()})];case 1:return f.sent(),[2]}})})},qa=function(a,c,b,f,d,g,e,m,k,t){var h=a.getElementsByClassName(f)[0],n=a.getElementsByClassName(d)[0],r=m?a.getElementsByClassName(m)[0]:void 0,l=a.querySelector(g);if(!n||!h||!l)throw Error("One or more elements to record feedback are not p/resent.");f=function(q,
v){q&&(q.onclick=function(){return p.__awaiter(void 0,void 0,void 0,function(){var B;return p.__generator(this,function(z){switch(z.label){case 0:return[4,S(q,function(){v&&k?k():!v&&t&&t();y(l,!1);y(n,v);y(h,!v);r&&(r.style.opacity=v?"0.3":"1");e&&F(e.prefix+":record-feedback:success")},function(){console.log("Failed to record feedback on click");y(l,!0);e&&F(e.prefix+":record-feedback:failure")})];case 1:return z.sent(),e&&(B=v?e.primaryAction:e.secondaryAction,F(e.prefix+":record-feedback:"+B)),
[2]}})})})};c=M(c,a);f(c,!0);a=M(b,a);f(a,!1)},ra=function(a,c,b,f,d){var g=function(t){return E["default"].setup(["getCanariesFeedbackReasons"]).getCanariesFeedbackReasons(t)},e=f.getElementsByClassName("p13n-not-inte/rested-reasons")[0],m=M("p13n-not-inte/rested-success-message",f),k=f.querySelector("#p13n-record-feedback-error-message");return function(){d.includes(a)||d.push(a);e?(y(m,!1),e.hasChildNodes()||g({asin:a,strategyId:c,widgetGroupId:b}).then(function(t){Array.prototype.slice.call(t.getElementsByClassName("p13n-feedback-reasons-option")).forEach(function(h){h.getElementsByTagName("input")[0].onclick=
function(){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(n){S(h,function(){y(k,!1);y(e,!1);y(m,!0)},function(){console.log("Failed to record feedback reason on click");k&&y(k,!0)});return[2]})})}});e.appendChild(t)}),y(e,!0)):y(m,!0)}},sa=function(a,c){return function(){var b=c.indexOf(a);-1<b&&c.splice(b,1)}},ta={ctiList:["Website/Personalization/Report a Problem CX"],category:"Website",type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",
group:"P13N Report a Problem CX"},ua=[{ctiList:["Website/Personalization/Similarities","Website/Detail Page/Similarities"],category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],ya=function(a){var c=u["default"].cardRoot.querySelector(".p13n-report-flag"),b=ka["default"].setup();b.define("showFlag","mouseover",function(){c.classList.remove("p13n-report-flag-hide")});b.define("hideFlag","mouseout",function(){c.classList.add("p13n-report-flag-hide")});
b.attach("showFlag",a);b.attach("hideFlag",a);var f=u["default"].cardRoot.querySelector(".internal-flag-form"),d=f.querySelector(".internal-flag-env-data").dataset,g=f.querySelector(".internal-flag-title-text"),e=f.querySelector(".internal-flag-description").firstElementChild,m=f.querySelector(".internal-flag-alias"),k=f.querySelector(".internal-flag-/response-message"),t=function(h){h.preventDefault();h=function(q){return!q||!q.trim()};if(h(g.value)||h(e.value)||h(m.value))return N(k,!1,"Something went wrong. One of the required fields was missing."),
!1;h=u["default"].cardRoot.querySelectorAll(".a-dynamic-image");var n;if(n=u["default"].cardRoot.querySelector(".a-carousel-heading")){var r=va(a,h.length);n="Internal user reported issue '"+g.value+"' with widget: "+n.innerText}else r=wa(a),n="Internal user reported issue '"+g.value+"'";h=xa(h,r,e.value,m.value,d);var l=ta;ua.forEach(function(q){q.ctiList.includes(d.cti)&&(l=q)});R["default"].post("https://p13ngoals.corp..com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},
{sim_params:{assigned_folder:l.folder,description:h,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:l.group,category:l.category,impact:5,item:l.item,type:l.type}},tags:[{id:"internal-problem-generated"}],title:n}}).then(function(q){N(k,!0,q)}).catch(function(q){N(k,!1,q)});return!1};f.onsubmit=function(h){return t(h)};b=u["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(b.dataset.name)w["default"].on("a:popover:hide:"+b.dataset.name,function(){f./reset();
k.innerText=""})},va=function(a,c){if(!a.dataset.aCarouselOptions)return x["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var b=u["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");b=(Number(b.value)||1)-1;return a.map(function(f){return JSON.parse(f).id}).slice(b,b+c)},wa=function(a){return(a=a.dataset.asinList)?a.split(","):[]},xa=function(a,c,b,f,d){for(var g="",e=0;e<a.length;e++){var m=
a[e];g+=(m?"![]("+m.src+")":"IMAGE MISSING")+"\nASIN: "+(c[e]?c[e]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w..com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+(f+"](https://phonetool..com/users/"+f+")\n**Comment:** "+b+"\n\n**Widget Group ID:** "+d.widgetGroupId+"\n**Strategy ID:** "+d.strategyId+"\n**CTI:** "+
d.cti+"\n**Facets:** ")+(d.facets+"\n**Content Reftag:** "+d.reftag+"\n"+(""!==d.baseAsin?"**Page ASIN:** "+d.baseAsin+"\n":"")+"\n**SessionID:** ")+(d.sessionId+"\n**MarketplaceID:** "+d.marketplaceId+"\n**Device Type:** "+d.deviceType+"\n\n**List of ASINs:**\n\n")+g},N=function(a,c,b){c?(a.classList.remove("a-color-error"),b./responseBody&&"object"===typeof b./responseBody?b./responseBody./response&&b./responseBody./response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp..com/"+b./responseBody./response.id+
'" target="_blank">SIM-T ticket</a> you created.':(x["default"].log("Fail to find the id of the SIM-T ticket created in the /response body of /response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(x["default"].log("The /response body of /response data is not an object.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket.")):(a.classList.add("a-color-error"),a.innerText="string"===typeof b?b:"Oops! Something went wrong. Please try again.")},
za={feedbackModalInit:function(a,c){var b={prefix:"p13n-desktop-feedback-modal",primaryAction:"not-inte/rested",secondaryAction:"remove-not-inte/rested"},f=[],d=u["default"].cardRoot.querySelector(".p13n-desktop-canaries-kebab-data");if(d){F(b.prefix+":kebab:render");d.onclick=function(){return F(b.prefix+":kebab:click")};u["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").onclick=function(){return F(b.prefix+":modal:open")};var g=u["default"].cardRoot.querySelector(".p13n-ni-iyr-redirect");
g&&(g.onclick=function(){return F(b.prefix+":iyr:click")});g=u["default"].cardRoot.getElementsByClassName("p13n-canaries-desktop-feedback-modal")[0];if(!g)throw Error("Dataset not p/resent or does not contain required data!");var e=g.querySelector("#endOfList"),m=u["default"].cardRoot.getElementsByClassName("p13n-desktop-feedback-modal-faceouts-list")[0],k=g.querySelector("#p13n-desktop-feedback-modal-loading-items"),t=g.querySelector("#p13n-desktop-feedback-modal-error-loading-items"),h=new na(d,
e,m,function(q,v){var B;if(v.hasChildNodes()){v=Array.from(v.childNodes);try{for(var z=p.__values(v),A=z.next();!A.done;A=z.next()){var H=A.value;v=H;var G=v.getElementsByClassName("p13n-individual-feedbackButton")[0];qa(v,"p13n-individual-feedbackButton","p13n-feedback-undo-button","p13n-desktop-feedback-modal-initial-faceout","p13n-desktop-feedback-modal-undo-faceout","#p13n-record-feedback-error-message",b,"p13n-feedback-list-asin-image",ra(G.dataset.asin||"",d.dataset.strategyId||"",d.dataset.widgetGroupId||
"",v,f),sa(G.dataset.asin||"",f));q.appendChild(H);G.dataset.strategyId=d.dataset.strategyId;G.dataset.widgetGroupId=d.dataset.widgetGroupId}}catch(I){var J={error:I}}finally{try{A&&!A.done&&(B=z.return)&&B.call(z)}finally{if(J)throw J.error;}}}},function(q){return E["default"].setup(["getCanariesFeedbackModalItems"]).getCanariesFeedbackModalItems(q)},t,k);u["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").addEventListener("click",function(){return p.__awaiter(void 0,void 0,
void 0,function(){return p.__generator(this,function(q){switch(q.label){case 0:return""!==m.innerHTML||h.isInErrorState()?[3,2]:[4,h.getNextItemBatch(m)];case 1:return q.sent(),[3,4];case 2:if(!h.isInErrorState())return[3,4];h./resetLazyLoading();return[4,h.getNextItemBatch(m)];case 3:q.sent(),q.label=4;case 4:return[2]}})})});g.addEventListener("wheel",h.throttledScrollAction);var n=function(q){return E["default"].setup(["ref/reshCard"]).ref/reshCard(q)};g=d.dataset.uniqueId;e=d.dataset.input;!e&&(k=
u["default"].cardRoot.querySelector(".p13n-desktop-canaries-wrapper-data"),null===k||void 0===k?0:k.dataset)&&(e=k.dataset.input);var r=JSON.parse(e||"{}"),l=u["default"].cardRoot.querySelector("#p13n-desktop-feedback-modal-close-message");w["default"].on("a:popover:hide:p13n-desktop-feedback-modal_"+g,function(){return p.__awaiter(void 0,void 0,void 0,function(){var q,v,B,z,A,H,G,J,I,T;return p.__generator(this,function(O){switch(O.label){case 0:if(!(0<f.length&&r&&r.content))return[3,2];q=!1;return[4,
E["default"].setup(["getDesktopRef/reshExperimentTreatment"]).getDesktopRef/reshExperimentTreatment().then(function(D){q=D.isT1}).catch(function(D){x["default"].log("Error fetching items: "+D.message);q=!1})];case 1:O.sent();if(q){v=r.content.recommendations;B=[];try{for(z=p.__values(v),A=z.next();!A.done;A=z.next())H=A.value,G=H.id,J=f.indexOf(G),0>J&&B.push(H)}catch(D){I={error:D}}finally{try{A&&!A.done&&(T=z.return)&&T.call(z)}finally{if(I)throw I.error;}}B.length<c?l?(l.style.display="inline",l.style.position=
"absolute",l.style.top=(u["default"].cardRoot.offsetHeight-l.offsetHeight)/2+"px",l.style.right=(u["default"].cardRoot.offsetWidth-l.offsetWidth)/2+"px"):x["default"].log("Could not find the changeover element for message surfacing"):(r.content.recommendations=B,n(r).then(function(D){u["default"].cardRoot.innerHTML=D.outerHTML;a()}).catch(function(D){x["default"].log("Error fetching items: "+D)}))}O.label=2;case 2:return[2]}})})})}}},Aa={setupModal:function(a){return p.__awaiter(void 0,void 0,void 0,
function(){var c;return p.__generator(this,function(b){c=u["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!c)return[2];ya(a);return[2]})})}},Ba=function(a){var c=Array.prototype.slice.call(a.querySelectorAll("[data-metrics]"));c.push(a);c.forEach(function(b){if(b&&b.dataset&&b.dataset.metrics){var f=JSON.parse(b.dataset.metrics),d;for(d in f)f.hasOwnProperty(d)&&K.count(d,f[d]);b.removeAttribute("data-metrics")}})},U=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
V=/[^\/\-\[\]():\s]/,Ca=function(a){var c=w["default"].$("<div>")[0];c.classList.add("p13n-sc-offscreen-truncate");var b=parseInt(a.getAttribute("data-rows")||"2",10),f=function(){var e=a.innerHTML;a.innerHTML="&hellip;";var m=a.clientHeight;a.innerHTML=e;return m}();if(b){if(f){var d=function(e){c.innerHTML=e;return Math.round(c.clientHeight/f)<=b},g=function(e,m){e=e.split(m);var k=Math.floor(a.clientWidth/12),t=function(n){c.classList.add("p13n-sc-offscreen-truncate");c.style.overflow="hidden";
c.textContent=n;a.appendChild(c);n=a.clientWidth>=a.scrollWidth;a.removeChild(c);return n},h=function(n){var r=n.length-k;n.trim().length>k&&!t(n)&&Array.prototype.slice.call(n).map(function(l,q){return q>k&&q<=r&&V.test(l)?"&shy;"+l:l});return n};return e.map(function(n){return h(n)}).join("")};return{truncate:function(){var e=a.innerHTML.trim(),m=a.textContent||"";e=g(e,U);a.appendChild(c);if(d(e))a.removeChild(c),a.innerHTML=e;else{var k=e.split(U);for(var t=1,h=k.length,n,r,l=0;t!==h;)if(n=Math.floor((h+
t)/2),r=k.slice(0,n).join("")+"&hellip;",d(r)){if(1>=h-n){for(l=n;0<l&&!V.test(k[l-1]);)l--;break}t=n}else h=n;k=0===l?void 0:k.slice(0,l).join("")+"&hellip;";k?(a.innerHTML=k,a.setAttribute("title",m)):(x["default"].log("Unable to successfully truncate line "+e,"ERROR"),a.removeChild(c))}}}}x["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else x["default"].log("Truncation element missing necessary line number data","ERROR")},Da=function(a){var c=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));
a=a.getElementsByClassName("p13n-sc-truncate-fallback");(window.CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?c:c.concat(Array.prototype.slice.call(a))).filter(function(b){return!!b.offsetParent}).map(function(b){var f=Ca(b);f&&(f.truncate(),b.classList.add("p13n-sc-truncated"),b.classList.remove("p13n-sc-truncate"),b.classList.remove("p13n-sc-truncate-fallback"),b.className=b.className.replace(/p13n-sc-line-clamp-\d/g,""))})},P=function(a){return 0===Math.floor(a/10)?"0"+a.toString():
a.toString()},Ea=function(a){var c=a.dayscountdowntoendtemplate,b=a.expiredstring,f=a.hourscountdowntoendtemplate,d=a.minutescountdowntoendtemplate;a=parseInt(a.endtime,10);var g=Date.now();if(g<=a){b=null;var e=a-g;g=Math.floor(e/864E5);var m=Math.floor(e/36E5);a=Math.floor(e/6E4%60);e=Math.floor(e/1E3%60);if(1<g&&c&&(b=c,null!==b))return c=b.replace("${daysCount}",g.toString());d&&(b=0===m?d:f);return null!==b?(c=b.replace("_hours_",P(m)),c=c.replace("_minutes_",P(a)),c=c.replace("_seconds_",P(e))):
""}return b},Fa=function(a){if(null!==a&&a.dataset.endtime)var c=setInterval(function(){a.innerText===a.dataset.expiredstring&&clearInterval(c);var b=Ea({dayscountdowntoendtemplate:a.dataset.dayscountdowntoendtemplate||"",endtime:a.dataset.endtime||"",expiredstring:a.dataset.expiredstring||"",hourscountdowntoendtemplate:a.dataset.hourscountdowntoendtemplate||"",minutescountdowntoendtemplate:a.dataset.minutescountdowntoendtemplate||""});a.innerText=b},1E3)},Ga={initCarousel:function(a){return p.__awaiter(void 0,
void 0,void 0,function(){var c,b,f;return p.__generator(this,function(d){c=(a||{}).afterPageLoaded;b=u["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[u["default"].cardRoot]:Array.prototype.slice.call(u["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));f=E["default"].setup(["getCarouselItems"]);if(null===b||void 0===b||!b.length)return[2];b.forEach(function(g){return p.__awaiter(void 0,void 0,void 0,function(){var e,m,k,t,h;return p.__generator(this,function(n){switch(n.label){case 0:e=
function(){w["default"].loadDynamicImage("[data-name]='"+h+"' .p13n-sc-dynamic-image");Da(g);Ba(g);null===c||void 0===c?void 0:c(g);var r=window.P;la(r);ma(r)};e();if(g.classList.contains("p13n-carousel-initialized"))return[2];g.classList.add("p13n-carousel-initialized");m=ja["default"].getCarousel(Z.unscope(g));k=ia["default"].getCarousel(g);t=g.dataset||{};h=m.getAttr("name");return[4,Promise.all([k.initialized,Aa.setupModal(g)])];case 1:return n.sent(),w["default"].on("a:carousel:"+h+":change:pageSize",
e),w["default"].on("a:carousel:"+h+":change:loading",e),w["default"].on("a:carousel:"+h+":change:animating",e),w["default"].on("a:carousel:"+h+":change:fetchedItems",e),k.attachRemoteOperation(function(r){var l=r.indexes;r=r.ids;return f.getCarouselItems(p.__assign(p.__assign({},t),{ids:r,indexes:l,offset:String(l[0]||0)}))}),[2]}})})});return[2]})})}},Ha=function(){var a,c=Array.prototype.slice.call(u["default"].cardRoot.querySelectorAll('[class*="dealsCardDealTimer"]'));try{for(var b=p.__values(c),
f=b.next();!f.done;f=b.next())Fa(f.value)}catch(g){var d={error:g}}finally{try{f&&!f.done&&(a=b.return)&&a.call(b)}finally{if(d)throw d.error;}}},W=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,c;return p.__generator(this,function(b){switch(b.label){case 0:return a=Ga.initCarousel({afterPageLoaded:Ha}),c=za.feedbackModalInit(W,1),[4,a];case 1:return b.sent(),[4,c];case 2:return b.sent(),[2]}})})};Q._operationNames="getCarouselItems getCanariesFeedbackModalItems ref/reshCard getDesktopRef/reshExperimentTreatment deleteNotInte/rested recordNotInte/rested".split(" ");
Q.card=W});
