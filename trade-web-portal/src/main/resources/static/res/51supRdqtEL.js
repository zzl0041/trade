(function(z){var C=window.UIPageJS||window.P,H=C._namespace||C.attributeErrors,b=H?H("DPTwisterPlusDesktopConfiguratorAssets",""):C;b.guardFatal?b.guardFatal(z)(b,window):b.execute(function(){z(b,window)})})(function(z,C,H){z.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(b,l,t,q,m,f,x,y,w,p){(p?p.inlineTwisterData||{}:{}).inlineTwisterEnabled&&(f=new f,new l(p,t.Row,q,m,f,x,y,w),b.trigger("desktop-configurator-view-initialized"))});"use strict";z.when("A").register("desktop-configurator-dimension-handler",function(b){function l(b){this.numberOfDimensionsExpandedOnLanding=b.numberOfDimensionsExpanded||0;this.expandAllDimensions=-1===
this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=b.maxNumberOfDimensionsExpanded||1}l.prototype={registerDimension:function(b,l){this.dimensionKeyRowMap[b]=l;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(b)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=Object.keys(this.dimensionKeyRowMap).length)},
expandDimension:function(b){-1===this.expandedDimensionList.indexOf(b)&&this.expandedDimensionList.push(b);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var l=0;l<this.expandedDimensionList.length&&(this.expandedDimensionList[l]!==b&&this.dimensionKeyRowMap[this.expandedDimensionList[l]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);l++);},collapseDimension:function(b){b=this.expandedDimensionList.indexOf(b);-1!==b&&this.expandedDimensionList.splice(b,
1)}};return l});"use strict";z.when("A","desktop-configurator-constants","3p-promise").register("desktop-configurator-view",function(b,l,t){function q(f,x,q,w,p,v,A,r){function c(){"function"===typeof C.markFeatureInteractive&&C.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function a(){if(!F)return 0===f.unselectedDimCount;var d=g();return!!F.util.getAsinFromSelectionInfo(d)}function d(d,a,g,e,k,c,b,u,n,r,f,m){return{text:d,image:a||"",popoverImage:g||
"",name:e,id:f+"_"+e,selected:k,slotHtm:c,showSlot:b,isVisible:u,unavailable:n,defaultSlotUnavailable:X,isCirclularImageSwatch:h.inlineTwisterData&&"CIRCLE"===h.inlineTwisterData.swatchShape,asin:r,pageUrl:m}}function k(d){R[d]||null===J[d]||(d=h.rows[d],d.toggleSwatch&&d.toggleSwatch.removeMisplacedSwatch())}function n(d,a){var e=S.unselectedDimensionPrompt||"",g=f&&f.variationDisplayLabels?f.variationDisplayLabels[d]:"",k=f&&f.variationValues?f.variationValues[d][a]:"";return{dimKey:d,titleSelectorPrefix:"inline-twister-dim-title-",
titleValueSelector:"inline-twister-dim-title-value",mainText:g,subText:-1!==a?k:e.replace("###dimension",g||"")}}function g(){if(!F){var d=[];b.each(h.dimList,function(a){d.push({dimKey:a,val:f.selectedVariationValues?f.selectedVariationValues[a]:-1})});return d}return F.state()}function e(){return b.map(h.dimList,function(d,a){if(!h.isSingletonMap[d])return new t(function(g){u(h.rows[d],d,a);g()})})}function u(g,e,k){var c=h.inlineTwisterData.slotsEnabledDimensions,u=!!((h.dimList.length===c.length?
c[k]:c[0])&&a(e));k=f.variationValues[e];var n=g.getInitialVisibleSwatchList(),r=[];b.each(k,function(a,g){a=d(a,Y[e+"::"+g],Z[e+"::"+g],g,h.initSelectionState[e].val===g,n[g]?n[g].slotHtm:"",u,n[g]&&n[g].isVisible,n[g]&&n[g].unavailable,H,e,O[e]?O[e][a]:null);r.push(a)});h.swatches[e]=r}function D(){b.each(h.rows,function(d){h.isSingletonMap[d.dimKey]||(d.createDisplaySwatches(),d.adjustSwatchWidthAndSpacing(),h.textSwatchMap[d.dimKey]&&d.toggleSwatch.alignTextSwatches())})}function G(){function e(a,
g,k){var c,u,n,r=a.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),D=f.variationValues[g]||[],m=h.inlineTwisterData.inlineVariationsSize,p=-1,x=m,G=[],l=null;-1===m&&(p=parseInt(a.expanderContent.attr("data-swatchCountPerRow"))||r.length,x=p*N[g]);b.each(r,function(e,h){var b=parseInt(e.getAttribute("data-idxInToggleSwatchList")),r="true"===e.getAttribute("data-initiallySelected"),f="true"===e.getAttribute("data-initiallyUnavailable");c=e.getAttribute("data-asin");
u=b;n=D[b]||"";var q,t,v;q=Y[g+"::"+u];t=Z[g+"::"+u];v=n;f=d(v,q,t,u,r,"",k,!0,f,c,g,O[g]?O[g][v]:null);a.toggleSwatch&&(q=a.toggleSwatch.createSwatch(f,e),f.isVisible=q.isVisible);G.push(f);r&&h>=x&&(J[g]=b);-1!==m&&-1===p&&(e=e.getBoundingClientRect().top,null===l?l=e:e!==l&&(p=h))});-1!==m&&(-1===p&&(p=r.length),N[g]=Math.ceil(r.length/p));h.inlineVariationsSize[g]=r.length;a.toggleSwatch&&a.toggleSwatch.setNumberOfSwatchesPerRow(p);return G}function u(d,g,e){var k=!(!d||!a(g)),c=h.rows[g].getInitialVisibleSwatchList();
k&&b.each(c,function(a){if(!a.unavailable){var k=r.updateIfCurrentlyActive.bind(r,a.id),k=h.slotManager.get(a.asin,g,h.noOfLoadingIndicator,!1,aa,k,e);a.updateSlotNode({showSlot:d,slotHtm:k},!1,g)}})}function D(d,a,e){d={dimIndex:h.dimIndexMap[d],dimValueIndex:a};a=l.DP_STATE_VIEW_SUBTYPE;var k=h.dimensionsMap,c;c=g();for(var u=l.CHAR_UNDERSCORE,b=[],n=0;n<h.dimensionsMap.length;n++){var r=c[n].val;-1===r&&(r=l.CHAR_ASTERISK);b.push(String(r))}c=u?b.join(u):b;return{divMetadata:d,eventType:e,subType:a,
dimensionsMap:k,currDimCombId:c}}var p=g(),G=0,t={},q=h.inlineTwisterData.slotsEnabledDimensions,v=h.inlineTwisterData.popoverSlotsEnabledDimensions;m.each(p,function(d,a){t[a.dimKey]=a;h.dimIndexMap[a.dimKey]=d;h.dimensionsMap[d]=a.dimKey});h.initSelectionState=t;m.each(h.dimList,function(d,a){var e=t[a].val;d=K(a);var e=n(a,e),k=!(!U&&(h.dimList.length===q.length?q[G]:q[0])),c=-1!==V.indexOf(a);h.textSwatchMap[a]=d;d=new x("inline-twister-row-",e,{showSlot:!1,dimKey:a,inlineTwisterData:h.inlineTwisterData},
{handleDimensionExpansion:function(d,e,b){a=d.dimKey;if(b){h.dimensionHandler.expandDimension(a);d=H;b={};W[a]?(b=I(h.swatches[a],e,a,g(),!1,!c,k,!!h.dimensionsExpandedInline[a]),h.indexTranslationMap[a]=b,d={swatches:h.swatches[a]}):(u(e,a,k),W[a]=!0);var n=h.rows[a];n.setState(d,b,L,null,!1);E(e,n,a);h.logger.logDimensionExpanded(a);c||(J[a]=null)}else h.dimensionHandler.collapseDimension(a),h.logger.logDimensionCollapsed(a)}},h.logger);h.rows[a]=d;G+=1});0===h.inlineTwisterData.numberOfDimensionsExpanded&&
(c(),ba=!0);G=0;m.each(h.dimList,function(d,c){function n(a,d,e){if(d){var g=parseInt(d.buttonName,10),k=a[g]&&a[g].id?a[g].id:"";c=d.buttonGroupName;a[g]&&a[g].selected&&h.logger.logSelectedSwatchClick();k&&r.exists(k)&&r.hide(k);L=c;a={dimKey:c,val:g};C.newTwisterInteractionStartTime=new Date;h.twister.metaData(D(c,g,l.viewEvents.CLICK));h.twister.dimensionChanged(a);h.logger.logDimensionValueClick();e&&h.logger.logDimValueClickAfterAutoUpdate()}}function u(d,e){var k=e.data,c=e.type;e=e.$currentTarget;
var b=k.id,n=!!a(d),n=P&&n&&Q,n=k.showImageInPopOver||n,f=!Q,p=[];if(k){if(c===l.viewEvents.MOUSE_ENTER){var m=parseInt(k.name,10);p.push({dimKey:d,val:m});n&&r.show(b,e,k,f)}else n&&r.hide(b),p=g();F&&(h.twister.metaData(D(d,m,c)),h.twister.dimensionPeek(p));L=d}}function p(d,a){var e=parseInt(d.buttonName,10),g=h.swatches[a];(g?g[e]:H)?(B.setUserInteracting(!0),b.delay(function(){n(g,d)},350),h.logger.logSecViewSwatchClick()):z.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
e+" ; Swatch length: "+h.swatches[a].length,ca.ERROR,ca.ATTRIBUTION)}function x(d,a){h.isSideSheetOpen=a;h.isWindow/resizedAfterSideSheetOpen&&!a&&m.each(h.dimList,function(a,d){h.textSwatchMap[d]&&(K(d),(a=h.rows[d])&&a.toggleSwatch&&(a.toggleSwatch.alignTextSwatches(),a.toggleSwatch.p/reserveNaturalSwatchOrder&&a.toggleSwatch.alignTextSwatchNodesInLastRow()))});h.isWindow/resizedAfterSideSheetOpen=!1}function t(a,d,e){var c=S.desktopConfiguratorAllOptionsString||"",n=h.swatches[a].length,u={dimensionDisplayText:e.mainText,
displayValueText:e.subText,dimKey:a,getSwatchInfo:B.getSwatch.bind(B),destroyPopover:r.destroy,optionsText:c,totalValueCount:n,isTextSwatch:w};h.sideSheet.open(u);var f={swatches:h.swatches[a]};b.delay(function(){var e=I(h.swatches[a],d,a,g(),!0,!1,A,!1);T&&k(a);B.setState(f,e,L,null,!0,!0);h.sideSheet.update(u);R[a]=!0;b.delay(function(){w&&E(d,B,a,!0);w&&B.toggleSwatch&&n<l.TEXT_ALIGNMENT_LIMIT&&B.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);h.isSideSheetOpen=!0;h.isWindow/resizedAfterSideSheetOpen=
!1;h.logger.logSeeAllLinkClick("Dimension"+(h.dimIndexMap[a]+1))}function y(a,d,e){var c=B.expanderContent.height();B.setMaxHeight(c);var n={swatches:h.swatches[a]};if(e)e=(da-N[a]+1)*c,c=I(h.swatches[a],d,a,g(),!1,!1,A,!0),T&&k(a),B.setState(n,c,L,null,!1,!0),B.triggerExpandOrCollapseAnimation(e,500),E(d,B,a),w&&B.toggleSwatch&&B.toggleSwatch.alignTextSwatches(!0),h.dimensionsExpandedInline[a]=!0,R[a]=!0,h.logger.logSeeAllLinkClick("Dimension"+(h.dimIndexMap[a]+1));else{e=c;d=B.getDisplaySwatches();
for(c=N[a];c<d.length;c++){for(var b=!1,u=H,r=0;r<d[c].length;r++)if(u=d[c][r]?d[c][r].domNode:null){var f=parseInt(u.attr("data-idxInToggleSwatchList"),10),f=n.swatches[f];f.selected&&(b=!0);f.isVisible=f.selected}!b&&u&&(e-=u[0].scrollHeight)}B.triggerExpandOrCollapseAnimation(e,250,function(){B.setState(n,{},L,null,!1)});h.dimensionsExpandedInline[a]=!1}}function K(a){F&&(h.isWindow/resizedAfterSideSheetOpen=!0,h.isSideSheetOpen||(E(h.showSlotMap[a],h.rows[a],a,!1),h.sideSheet.ref/reshWidth()))}
var w=h.textSwatchMap[c];d=[];var M=!U&&(h.dimList.length===q.length?q[G]:q[0]),Q=h.dimList.length===v.length?v[G]:v[0],A=!M,P=M||Q,T=-1!==V.indexOf(c),B=h.rows[c];h.showSlotMap[c]=P;N[c]=h.inlineTwisterData.numOfRowsPerDimension;M=-1!==f.singletonDimensionKeys.indexOf(c);h.isSingletonMap[c]=M;G+=1;!M&&B&&(M=!(!P||!a(c)),J[c]=null,d={name:c,swatches:d,isTextSwatch:w,onChange:n,onHover:u,hideSlotsFromMainView:A,totalSwatchCount:(f.variationValues[c]||[]).length,p/reserveNaturalSwatchOrder:T},h.sideSheet.registerToggleButtonGroup(c,
p,x),B.initializeComponents(d,P,{showSideSheet:t,toggleInlineExpansion:y,handleWindow/resize:K}),h.dimensionHandler.registerDimension(c,B),d=e(B,c,M),h.swatches[c]=d)});ba||c()}function K(a){var d=!0;(h.inlineTwisterData.disableImageSwatch===H?0:h.inlineTwisterData.disableImageSwatch)||(d=!h.inlineTwisterData.imageDimensionKeysMap[a]);return d}function I(d,e,g,c,n,u,f,p){var D=!(!e||!a(g));e=F.util.getDimAvailability(g,c);var x=-1!==V.indexOf(g),l=b.state("filteredAvailability");if(l!==H&&!0===l.filterApplicable&&
1===c.length){for(var G={},q=0;q<l.asins.length;++q)G[l.asins[q]]=1;for(var l=[],t=[],q=0;q<e.available.length;++q){var v=e.available[q];v.asin in G?l.push(v):t.push(v)}e.available=l;e.unavailable=t}var I={},E=0,w=r.updateIfCurrentlyActive,y=-1,K=-1;m.each(c,function(a,d){d.dimKey===g&&(y=d.val,K=a)});-1!==y&&(u&&(I[y]=E),E++);var A=h.rows[g];b.each(e.available,function(a){d[a.index]=d[a.index]||{};var e=d[a.index];e.unavailable=!1;e.selected&&(y=a.index,e.isVisible||(null!==J[g]&&d[J[g]]&&(d[J[g]].isVisible=
!1,x&&k(g)),J[g]=a.index),e.isVisible=!0);u&&(e.isVisible=E<h.inlineVariationsSize[g]||e.selected);p&&(e.isVisible=!0);var c=e.isVisible||n,m=n?e.id+"_sec":e.id;D&&c?e.slotHtm=h.slotManager.get(a.asin,g,h.noOfLoadingIndicator,n,aa,w.bind(r,m),f):(e.slotHtm=e.slotHtm||"",w(m,e.slotHtm));(n||p)&&A&&A.toggleSwatch&&(c=A.toggleSwatch.getSwatch(a.index),b.objectIsEmpty(c)&&(I[a.index]=E));u&&y!==a.index&&(I[a.index]=E);e.showSlot=D;e.selected||E++});b.each(e.unavailable,function(a){d[a.index]=d[a.index]||
{};var e=d[a.index];e.unavailable=!0;u&&(e.isVisible=E<h.inlineVariationsSize[g]);p&&(e.isVisible=!0);var c=b.state("filteredAvailability"),k=X;c!==H&&!0===c.filterApplicable&&(a.index in c.variations[K]||(k='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+ea+"\x3c/span\x3e"),e.defaultSlotUnavailable=k);e.slotHtm=D?k:"";u&&(I[a.index]=E);e.showSlot=D;E++});W[g]=!0;x&&(I={});return I}function E(a,d,e,g){var c=h.textSwatchMap[e];a&&c&&(!g||h.isSideSheetOpen)&&(h.slotManager./resetMinSlotHeight(e),
a=d.toggleSwatch.getSlotNodes(g),fa(a,e,g),h.slotManager.updateSlotHeight(e,g))}function fa(a,d,e){h.slotManager./resetSlotHeight(d,e);b.each(a,function(a,e){b.each(a,function(a){h.slotManager.setState(a,d,e)})})}function aa(a,d){d&&!h.isSideSheetOpen||E(!0,h.rows[a],a,d)}var h=this,F=H;this.isWindow/resizedAfterSideSheetOpen=!1;this.data=f;this.noOfLoadingIndicator=1;this.dimList=f.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.dimensionsExpandedInline={};this.logger=p;this.inlineTwisterData=
f?f.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new A;var J={},S=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},X='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(S.defaultSlotUnavailableString||"")+"\x3c/span\x3e",Y=f.imageHashMap||{},Z=f.desktopConfiguratorPopoverImageMap||{},O=f.dimensionPageLoadUrls||{},ea="pwASINs"in f&&f.pwASINs instanceof Array&&0<f.pwASINs.length?f.pwUnavailableMessage:"",N={},
U=!!f.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new v(h.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var L,ca=l.loggingConstants,da=l.MAX_INLINE_ROWS;this.initSelectionState={};r.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize={};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};
var V=h.inlineTwisterData.dimsWithSwatchReorderingDisabled||[],R={},W={},ba=!1;(function(){var a=h.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");a.start();G();a.stop()})();b.on("register-desktop-configurator-with-twisterCore",function(a,d){F=a;h.logger.registerTwisterCore(F);h.sideSheet.init(h.logger);a=g();var c=h.inlineTwisterData.slotsEnabledDimensions,k=h.inlineTwisterData.popoverSlotsEnabledDimensions,u={};m.each(a,function(a,d){u[d.dimKey]=d});a=h.inlineTwisterData.isBusiness;
F.slotsDimSum.addDefaultQueryParameter("showFancyPrice",h.inlineTwisterData.showFancyPrice);F.slotsDimSum.addDefaultQueryParameter("isBusiness",a);F.slotsDimSum.addDefaultQueryParameter("twisterFlavor",l.DESKTOP_CONFIGURATOR_FLAVOR);h.slotManager=new q(F,w,h.logger,h.inlineTwisterData);h.dimensionHandler.init();var r=0;b.each(h.rows,function(a){function d(c){var k,u={},r;k=c.selected().selectionInfo();m.each(k,function(a,d){u[d.dimKey]=d});r=u[e].val;c=h.swatches[e];c[r]=c[r]||{};c[g]=c[g]||{};c[g].selected=
!1;c[r].selected=!0;var p=n(e,g);g===r||f||a.setThumbnailImage(c[r].image);g=r;I(c,l,e,k,!1,!1,x,!!h.dimensionsExpandedInline[e]);k=n(e,r);r={swatches:c};var D=b.filter(c,function(a){return a.isVisible});c.length!==D.length||a.isInlineExpanded||(a.hideInlineExpansionLink(),h.inlineVariationsSize[e]=c.length);a.setExpanderHeaderAriaLabel(p,k);a.setState(r,{},L,k,!1);E(l,a,e)}if(!h.isSingletonMap[a.dimKey]){a.postInitialize();var e=a.dimKey,g=u[e].val,f=K(e),p=h.dimList.length===k.length?k[r]:k[0],
D=!U&&(h.dimList.length===c.length?c[r]:c[0]),x=!D,l=D||p,p={viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+e};b.on("update-desktop-configurator-view",function(a){d(a)});h.twister=F.registerActive(p,{updateView:function(g,c){var k={};"VARIATION_CHANGE"===g?d(c):"VARIATION_PEEK"===g&&(g=c.peek().selectionInfo(),m.each(g,function(a,d){k[d.dimKey]=d}),g=k[e].val,g=n(e,g),L===e&&a.title.setState(g),h.sideSheet.activeDimKey===e&&h.sideSheet.updateDimVal(g))}});h.isSingletonMap[e]||
a.handleSeeMoreIng/ress((h.swatches[e]||[]).length)}r++});b.trigger("desktop-configurator-twisterCore-initialized",h);t.all(e()).then(function(){D()});d.then(function(){b.each(h.rows,function(a){a.activatePageRef/resh()})})})}var m=b.$;q.prototype={updateView:function(f){b.trigger("update-desktop-configurator-view",f.tsm.currentState())}};return q});"use strict";z.when("A").register("desktop-configurator-constants",function(b){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",
SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:48,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],SIZE_DIMENSION_NAME:"size_name",DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,
ABS_PACK_DESCRIPTION_RENDERED:"absPackDescriptionRendered",viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",
CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",
DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",
SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",
GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";z.when("A").register("desktop-configurator-logger",function(b){function l(){if(!(this instanceof l))return new l;m||(m=this);return m}function t(b){if("undefined"!==typeof C.csa){var m=C.csa("Events",{producerId:"dp-rpcx"}),l=f.count(b)||0;m("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:b,valueToLog:l},{ent:"all"})}}var q=b.$,m,f=C.ue;l.prototype={registerTwisterCore:function(b){this.twisterCore=
b},logCSMDataOnLanding:function(){var b=0,m=0,l=0,p=this.twisterCore.util,v=p.tvm.dimensionInfo,A=this.twisterCore.state().length,r=Object.keys(p.tvm.dimCombinations).length;q.each(v,function(c,a){c=a.dimKey;p.isRequiredDim(c)&&l++;p.isSingletonDim(c)?m++:b++});f&&f.count&&(f.count("dpMobileTwisterDropdownP/resent",b),t("dpMobileTwisterDropdownP/resent"),f.count("dpMbileTwisterSingletonDim",m),t("dpMbileTwisterSingletonDim"),f.count("dpMobileTwisterRequiredDim",l),t("dpMobileTwisterRequiredDim"),f.count("dpMobileTwisterDimSize",
A),t("dpMobileTwisterDimSize"),f.count("dpMobileTwisterFamilySize",r),t("dpMobileTwisterFamilySize"),f.count("twisterPlus.inlineTwisterGV",1),t("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(f){function m(a,d,c){var k=[];if(d===c)k.push(""),a=a[d],b.$.isArray(a)?b.each(a,function(a,d){k.push(a)}):k.push(a);else{var n=Math.floor((d+c)/2);d=m.call(this,a,d,n);var r=m.call(this,a,n+1,c);b.each(d,function(a,d){b.each(r,function(d,e){k.push(""===a?d:""===d?a:a+":"+d)})})}return k}function l(a){a&&
q.push(a)}var p=this,q=[],t=!0,r=!0,c=[0,3,8,25,50,100,1E3,5E3],a=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,d,k;f.dimensionList&&(d="variation_dimension:"+f.dimensionList.length,b.each(f.dimensionList,function(a,d){p.addCSMTag(a)}));for(var n=1;n<c.length;n++)if(a<=c[n]){k="family_size_bucket:"+c[n-1]+"-"+c[n];break}else n===c.length-1&&(k="family_size_bucket:gt"+c[n]);f.dimensionInfo&&b.each(f.dimensionInfo,function(a,d){a.isSingleton||(t=!1)});c=t?"SingletonFamily":"DesktopConfigurator";
f.initDimCombination&&b.each(f.initDimCombination,function(a,d){-1===a.val&&(r=!1)});l(d);l(k);l(c);r&&l("defaultSelection");f=m.call(this,q,0,q.length-1);(function(a){var d=this;b.each(a,function(a,g){a&&d.addCSMTag(a)})}).call(this,f)},createFunctionTimerInstance:function(b){var f=this;return{eventType:b,start:function(){this.startTime=Date.now()},stop:function(){this.startTime&&f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(b){C.ue&&C.ue.tag&&C.ue.tag(b)},logCounter:function(b,
m){f&&f.count&&(m===H?f.count(b,(f.count(b)||0)+1):f.count(b,m),t(b))},logBottomSheetPageUpdate:function(b){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},logSecViewTotalCount:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+b)},logSecViewGV:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+
b)},logSecViewClosed:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+b)},logDimensionCollapsed:function(b){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+b)},logDimensionExpanded:function(b){this.logCounter("twisterPlus.inlineTwister.dimExpand."+b)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},
logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},
logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(b){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+b)}};return l});"use strict";z.when("A").register("twister-dynamic-style",function(b){function l(b,f){this.name=b;this.styleNode;this.rules=f||[];this.pendingRef/resh}var t=b.$,q={};l.prototype={ref/resh:function(){var b=t("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?
(this.styleNode.replaceWith(b),delete this.styleNode,this.styleNode=b):(this.styleNode=b,this.styleNode.appendTo("body"))}};return{addCSSRules:function(b,f){q[b]?q[b].rules=f||[]:q[b]=new l(b,f);q[b].ref/resh()}}});"use strict";z.when("A","desktop-configurator-constants","desktop-configurator-twister-register").register("desktop-configurator-slot-manager",function(b,l,t){function q(b,c,a,d){this.twisterCore=b;this.batch={};this.currentBatch;this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=
c;this.slotIdentifierMap={};this.logger=a;this.auiPriceSize=d&&d.auiPriceSize?d.auiPriceSize:"m";this.currentlyUnavailableMessage=d&&d.stringTranslationMap?d.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=d&&d.desktopConfiguratorSlotsInMainView?d.desktopConfiguratorSlotsInMainView:[]}function m(r,c,a,d,k){var n=this.batch,g=this;n[r]=n[r]||[];n[r].push(a);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var a=b.map(g.batch,function(a,
d){return d});g.twisterCore.slotsDimSum.get(a,function(a){var e=g.batch[a.ASIN];e&&(v.each(e,function(d,e){e(a)}),delete g.batch[a.ASIN]);p(g.batch)&&(e=Object.keys(g.maxSlotHeight),b.each(e,function(a){d(a,k&&a===c)}))})},0)}function f(b,c,a,d){a[c]=a[c]||{};a[c].uniqueCount=a[c].uniqueCount||0;var k="inline-twister-dimsum-loading-"+c+"-"+a[c].uniqueCount;a[c].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+k+(b?" loading-indicator-1":"")+(d?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',
promise:function(a,d){var e=v("."+k+":not(.loading-indicator-in-popover)").parent();e.length&&(e.html(a),d(e))}}}function x(b){return b.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function y(b,c,a){return x(A.default.call(this,b.content.twisterSlotDiv,c,a))}function w(b,c){if(!b||0===b.length)return c;if(0<b.find(".loading-indicator-1").length)return b[0].scrollHeight;if(0===b.find(".defaultSlotUnavailable").length)return c;b=b[0].scrollHeight;
c<b&&(c=b);return c}function p(b){for(var c in b)if(b.hasOwnProperty(c))return!1;return!0}var v=b.$,A={default:function(b,c,a){b=v("\x3cdiv\x3e"+b+"\x3c/div\x3e");var d=b.find(".price_slot_ppu"),k=b.find("#ms3slot"),n=b.find("#twisterAvailability"),g=b.find("#deliveryPromisePrefix"),e=b.find(".variationReviewsSection"),u=a?[]:this.desktopConfiguratorSlotsInMainView,f=b.find(".twister_swatch_price");n.length&&((f.length||a)&&-1===u.indexOf("twisterAvailability")&&n.parent().addClass("aok-hidden"),
n.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),n.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),n.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),n.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),c&&this.logger.logAvailabilitySlotRender());0<f.length?(-1===u.indexOf("price")&&f.addClass("aok-hidden"),f.addClass("inline-twister-swatch-price"),a=b.find(".a-price"),
0<a.length?a[0].dataset&&(a[0].dataset.aSize=this.auiPriceSize):(f.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),f.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),f.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),a="a-size-small",f.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(a),
d.length&&(a="twister-plus-inline-twister-ppu a-size-micro",d.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(a),c&&this.logger.logPPUSlotRender()),c&&this.logger.logPriceSlotRender()):(f=b.find("#sndbox-mobile-twister-price"),0<f.length&&c&&this.logger.logPriceSlotRender());k.length&&(-1===u.indexOf("ms3")&&k.addClass("aok-hidden"),c&&this.logger.logPrimeSlotRender());0<g.length&&(g.removeClass("a-size-small a-color-secondary").addClass("a-color-base a-size-base"),
-1===u.indexOf("deliveryPromise")&&g.parent().addClass("aok-hidden"),g.find("br").remove(),d=g.find("b"),0===d.length&&(d=g.find("span")),d.length&&(k=" "+x(d.text()),d.addClass("aok-hidden"),g.append("\x3cspan\x3e"+k+"\x3c/span\x3e")),c&&this.logger.logDeliverySlotRender());0<e.length&&(e.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),-1===u.indexOf("variationReviews")&&e.addClass("aok-hidden"),c&&this.logger.logReviewsSlotRender());t.executeModifiers(b);
return b.html()}};q.prototype={get:function(b,c,a,d,k,n,g){var e=this,u=this.twisterCore.slotsDimSum.get([b]);if(u[b])return y.call(e,u[b].Value,!1,g);var p=f(a,c,e.slotIdentifierMap,g);m.call(this,b,c,function(a){p.promise(y.call(e,a.Value,!0,g),n)},k,d);return p.loadingHtm},setState:function(b,c,a){this.minSlotHeight[c]||(this.minSlotHeight[c]=[]);this.maxSlotHeight[c]||(this.maxSlotHeight[c]=[]);this.minSlotHeight[c][a]=this.minSlotHeight[c][a]||0;this.minSlotHeight[c][a]=w(b,this.minSlotHeight[c][a]);
this.maxSlotHeight[c][a]=this.maxSlotHeight[c][a]||0;var d=this.maxSlotHeight[c];var k=this.maxSlotHeight[c][a];!b||0===b.length||0<b.find(".loading-indicator-1").length||(b=b[0].scrollHeight,k<b&&(k=b));d[a]=k;this.maxSlotHeight[c][a]=this.maxSlotHeight[c][a]>this.minSlotHeight[c][a]?this.maxSlotHeight[c][a]:this.minSlotHeight[c][a]},updateSlotHeight:function(f,c){var a=[],d;b.each(this.maxSlotHeight[f],function(b,n){c?(a.push("#desktop-configurator-side-sheet #"+f+"dim_list .desktop-configurator-dim-row-"+
n+" .dimension-slot-info {height: "+b+"px;}"),d="twister-plus-desktop-configurator-side-sheet-slot-height-"):(a.push("#inline-twister-expander-content-"+f+" .desktop-configurator-dim-row-"+n+" .dimension-slot-info {height: "+b+"px;}"),d="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(d+f,a)},/resetMinSlotHeight:function(f){this.minSlotHeight[f]||(this.minSlotHeight[f]=[]);this.minSlotHeight[f]=b.map(this.minSlotHeight[f],function(){return 0})},/resetSlotHeight:function(f,
c){this.maxSlotHeight[f]||(this.maxSlotHeight[f]=[]);this.dynamicStyle.addCSSRules((c?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+f,[]);this.maxSlotHeight[f]=b.map(this.maxSlotHeight[f],function(){return 0})}};return q});"use strict";z.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",function(b,l,t){function q(){this.sideSheetData=this.activeDimKey=null;this.swatchList=
[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null;this.updateSideSheetStatus={}}function m(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function f(c,a){b.each(c,function(d){var c="desktop-configurator-swatch-hover:"+a+"_sec";try{b.declarative.remove(d,c),b.declarative.create(d,c,{})}catch(n){z.log("Hover event subscribe failed with error: "+this.name,r.ERROR,r.ATTRIBUTION)}})}
function x(c){c=Array.prototype.slice.call(c);var a=v(c[0]).find("input");c=v(c[c.length-1]).find("input");this.keyDownEventHandler=w.bind(this,a,c);document&&document.addEventListener("keydown",this.keyDownEventHandler);b.delay(function(){a&&a.focus()})}function y(){if(this.mainViewDimContainer){var c=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);c&&c.focus()}}function w(c,a,d){d.code&&"tab"===
d.code.toLowerCase()&&(d.shiftKey?document&&document.activeElement===c[0]&&(d.preventDefault(),a.focus()):document&&document.activeElement===a[0]&&(d.preventDefault(),c.focus()))}function p(c){var a=v("#desktop-configurator-side-sheet-content-header").clone();a.removeClass("aok-hidden");a.find(".dim-name").text(c.dimensionDisplayText+":");a.find(".dim-value").text(c.displayValueText);var d=c.optionsText;d&&a.find(".dim-options").text(d.replace("###options",c.totalValueCount));return a}var v=b.$,A=
l.sideSheetSelectors,r=l.loggingConstants;q.prototype={init:function(c){var a=this,d=v("#twister-plus-inline-twister-container");0!==d.length&&(d=d[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new t({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:l.SIDE_SHEET_ANIMATION_SPEED,width:d+l.SIDE_SHEET_PADDING+a.scrollbarWidth,onAfterHide:function(){c.logSecViewClosed(a.activeDimKey);b.each(a.swatchList,function(d){var c=parseInt(d.getAttribute("data-idxInToggleSwatchList"),
10),c=a.sideSheetData.getSwatchInfo(c);b.declarative.remove(d,"desktop-configurator-swatch-hover:"+a.activeDimKey+"_sec");a.sideSheetData.destroyPopover(c.id+"_sec")});y.call(a);a.updateSideSheetStatus[a.activeDimKey]&&a.updateSideSheetStatus[a.activeDimKey](a.activeDimKey,!1);m.call(a)}}))},open:function(c){this.activeDimKey=c.dimKey;this.sideSheetData=c;var a=v("#inline-twister-row-"+c.dimKey+" #tp-inline-twister-dim-values-container"),d=a.find(".desktop-configurator-dim-row-0"),k=v("#side-sheet-loader-container").clone().removeClass("aok-hidden"),
n=k.find(".loader-container"),g=k.find("#side-sheet-loader").clone().removeClass("aok-hidden"),e;if(c.isTextSwatch)a=d.width()-l.BORDER_WIDTH,e=d.height()-l.BORDER_WIDTH;else{var u=a.find(".inline-twister-swatch").not(".aok-hidden").not(".swatch-prototype");e=d.find(".swatch-image-container");a=e.outerWidth();e=e.outerHeight();u=Math.abs((u.width()-d.find(".swatch-image-container").outerWidth())/2)-l.BORDER_WIDTH;g.css("margin-right",u+"px");g.css("margin-left",u+"px")}g.width(a);g.height(e);b.each(d,
function(){n.append(g.clone().addClass("side-sheet-loader-1"))});d=n.clone();d.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");k.append(d);c=p(c);k.prepend(c);this.sideSheet.open(k[0].outerHTML)},update:function(c){this.mainViewDimContainer=v("#inline-twister-row-"+c.dimKey+" #tp-inline-twister-dim-values-container");var a=this.mainViewDimContainer.clone(),d=a.find(A.DIMENSION_VALUES_LIST);d.attr("id",c.dimKey+"dim_list");var b=p(c);a.prepend(b);d.children().slice(1).removeClass("aok-hidden");
d.attr("data-a-button-group",'{"name":"sec_'+c.dimKey+'"}');this.sideSheet.updateContent(a[0].outerHTML);c=this.sideSheet.container;this.swatchList=c.find(A.DIMENSION_VALUES_LIST).children().slice(1);f(this.swatchList,this.activeDimKey);this.dimValContainer=c.find(".desktop-configurator-side-sheet-content-header .dim-value");x.call(this,this.swatchList)},close:function(){this.sideSheet.close()},registerToggleButtonGroup:function(c,a,d){var k=A.SEC_VIEW_TOGGLE_BUTTON_PREFIX+c,n=this;this.updateSideSheetStatus[c]=
d;b.on("a:button-group:"+k+":toggle",function(d){n.sideSheet.close();d.selectedButton.buttonGroupName=c;a(d.selectedButton,c)})},updateDimVal:function(c){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(c.subText)},ref/reshWidth:function(){var c=v("#twister-plus-inline-twister-container")[0].getBoundingClientRect().width+this.scrollbarWidth;this.sideSheet.updateWidth(c+l.SIDE_SHEET_PADDING)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;
var c=document.body?C.innerWidth-document.body.clientWidth:-1;0>c&&(c=l.DEFAULT_SCROLLER_WIDTH);return c}};return q});"use strict";z.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(b,l,t){function q(a){var d=w("\x3cdiv /\x3e"),c=w("\x3cspan /\x3e"),b=a.title,k=a.showImageInPopOver,n=!a.hideSlots;d.addClass("desktop-configurator-popover-content");c.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");c.text(b);
d.append(c);if(k){var k=w("\x3cdiv /\x3e"),f=w("\x3cimg /\x3e");f.attr("src",a.image);f.attr("data-a-image-source",a.image);f.attr("alt",b);k.append(f);d.addClass("visual-dimension");k.addClass("desktop-configurator-image-block");d.prepend(k)}n&&m(d,a.slotNode);b=d.find("#unitCount");n=d.find("#packConfigurationString");n.addClass("desktop-configurator-packconfig-content");(a=a.id)&&"string"===typeof a&&a.startsWith(t.SIZE_DIMENSION_NAME)&&b.length&&(c.after(n),(c=C.ue)&&c.count&&c.count(t.ABS_PACK_DESCRIPTION_RENDERED,
(c.count(t.ABS_PACK_DESCRIPTION_RENDERED)||0)+1));return d}function m(a,d){d="string"===typeof d?d:d.clone();var c=w("\x3cdiv /\x3e");a.find(".desktop-configurator-slot-block").remove();c.addClass("desktop-configurator-slot-block");c.html(d);f(c);a.append(c)}function f(a){var e=a.find(".price_slot_ppu"),c=a.find("#ms3slot"),f=a.find(".twister_swatch_price"),p=a.find("#twisterAvailability"),l=a.find("#deliveryPromisePrefix"),m=a.find(".variationReviewsSection"),r=a.find(".default-slot-unavailable"),
q=a.find(".loading-indicator-1");a=a.find(".twisterPrimeWardrobe");var t={variationReviews:m,price:f,ms3:c,twisterAvailability:p.parent(),deliveryPromise:l.parent(),ppu:e,twisterPrimeWardrobe:a};q.length&&(q.addClass("loading-indicator-in-popover"),0===d.length?q.addClass("aok-hidden"):q.removeClass("aok-hidden"));b.each(k,function(a){t[a]&&(-1===d.indexOf(a)?t[a].addClass("aok-hidden"):(t[a].removeClass("aok-hidden"),a=n[a+"_styleSlot"],"function"===typeof a&&a.call(this,t)))});r.length&&r.removeClass("a-size-small").addClass("a-size-base")}
function x(a,d,c,k){c=q({id:a,slotNode:c.slotNode,title:c.title,showImageInPopOver:c.showImageInPopOver,image:c.image,hideSlots:k});d=l.create(d,{name:a,inlineContent:c,closeButton:!1,padding:"none",activate:"none",/restoreFocusOnHide:!1});p[a]=d;v[a]||(b.on("a:popover:afterShow:"+a,function(a){b.delay(function(){w(r.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),v[a]=!0);return d}function y(a,d,c){var b=p[a];b&&(a=q({id:a,slotNode:d.slotNode,title:d.title,showImageInPopOver:d.showImageInPopOver,
image:d.image,hideSlots:c}),b.update({content:a}));return b}var w=b.$,p={},v={},A=t.POPOVER_DELAY,r=t.sideSheetSelectors,c=null,a=null,d=[],k=t.CONFIGURED_SLOTS,n={price_styleSlot:function(a){var d=a.ms3,c=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),c.length&&c.removeClass("a-size-micro").addClass("a-size-small"),d.length&&(c=a.find(".twisterSwatchPrice"),c.length&&c.after(d),d.after("\x3cbr /\x3e")))},ms3_styleSlot:function(a){a=a.ms3;a.length&&
a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(a){a=a.twisterAvailability;a.length&&a.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base")}};return{show:function(d,e,k,n){c=this.exists(d)?y.call(this,d,k,n):x.call(this,d,e,k,n);clearTimeout(a);var f=this;a=b.delay(function(){w(r.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");c&&c.show();f.updateIfCurrentlyActive(d,k.slotNode)},A)},exists:function(a){return!!p[a]},
hide:function(d){(d=p[d])&&d.hide();c=null;clearTimeout(a)},updateIfCurrentlyActive:function(a,d){c&&c.$container&&c.attributes.name===a&&(a=c.$container.find(".desktop-configurator-popover-content"),m(a,d))},destroy:function(d){p[d]&&l.remove(d);delete p[d];clearTimeout(a)},setVisibleSlotConfig:function(a){d=a}}});"use strict";z.when("A").register("desktop-configurator-twister-register",function(){var b=[];return{registerModifier:function(l){b.push(l)},executeModifiers:function(l){b.forEach(function(b){b.modify&&
"function"===typeof b.modify&&b.modify(l)})}}});"use strict";z.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(b,l){var t=b.$,q=l.widgetSelectors,m=l.classes,f=l.cssConstants,x=l.loggingConstants,y=function(){function f(){var a=t(q.IMAGE_THUMBNAIL).attr("src");return a&&a.length&&(a=a.split("."),2<a.length)?a[a.length-2]:!1}function c(a,d,c,b){b=b&&0<b.length?b:a.find(".a-button");d&&!c?(b.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),
a.find("hr").show(),a.find("hr").removeClass("aok-hidden")):(b.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),a.find("hr").hide(),a.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(a,d,c){var n=0,g,e;b.each(a,function(a){a.domNode&&(a.isVisible||d||c)&&(g=a.domNode.attr("data-idxInToggleSwatchList"),e=c?t("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+g+"]"):a.domNode,a=e.find(".swatch-title-text-display"),a.length&&a[0].style.removeProperty("height"),
a=a?a.height():0,n<a&&(n=a))});b.each(a,function(a){a.domNode&&(a.isVisible||d||c)&&(g=a.domNode.attr("data-idxInToggleSwatchList"),e=c?t("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+g+"]"):a.domNode,e.find(".swatch-title-text-display").height(n))})},createSwatch:function(a,d,b,n,g,e,f){var p=!d.unavailable,l=d.isVisible,m=d.selected,r=d.showSlot,q=d.slotHtm;b="#"+b;if(e.length)return e=e.clone(),e.removeClass("swatch-prototype"),g&&e.addClass("slots-hidden"),e.attr("data-idxInToggleSwatchList",
n),n=e.find(b).attr("id",d.id),e.find(b+"-announce").attr("id",d.id+"-announce"),e.find("input").attr({name:d.name,"aria-labelledby":d.id+"-announce"}),e.find("text"===a?".swatch-title-text-display":"square_image"===a?".swatch-title-text":".swatch-text").text(d.text),p||n.addClass("a-button-unavailable"),m&&n.addClass("a-button-selected"),"text"!==a&&(m=e.find(".swatch-image"),m.addClass("inline-twister-manual-load"),m.attr({"data-a-image-source":d.image||"",id:"inline-twister-image-"+d.name,alt:d.text})),
m=e.find(".dimension-slot-info"),m.length&&(m.attr("id","dimension-slot-info-"+d.name),r?p?0<q.length&&m.html(q):m.html(d.defaultSlotUnavailable):e.find("text"===a?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),"text"===a&&c(e,r,g,n)),f.append(e),l||e.addClass("aok-hidden"),e},getThumbnailImageUrlForPhysicalId:function(a){return a&&a.length&&(a=a.split("."),2<a.length)?(a.splice(-2,1,f()),a.join(".")):!1},updateSlotSectionInTextSwatch:c}}(),w=function(f){function c(a,d,c,b,g,e,p,
m){this.id=a.id;this.unavailable=!!a.unavailable;this.selected=!!a.selected;this.showSlot=a.showSlot;this.slotHtm=a.slotHtm;this.isImageSwatch=!d;this.asin=a.asin;this.pageUrl=a.pageUrl;this.hideSlotsFromMainView=g;var l=d?"text":a.isCirclularImageSwatch?"circular_image":"square_image";this.domNode=m?t(m):f.createSwatch(l,a,c,b,g,e,p);this.isVisible=a.isVisible;this.imageUrl=a.image;this.popoverImage=a.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=d?".slots-padding":".dimension-slot-info";
this.title=a.text;this.name=a.name;this.subscribeToHoverEvent(c)}c.prototype={setState:function(a,d,c,b){this.selected=!!a.selected;this.updateAvailablity(a);this.updateSlotNode(a,d,c);this.updateVisibility(a);this.updateSwatchIndexInDomNode(b);return this},getSlotNode:function(a){this.slotNode||(this.slotNode=this.domNode.find(q.SLOT_NODE_SELECTOR));if(!a)return this.slotNode;a=this.slotNode?this.slotNode.attr("id"):"";return t("#desktop-configurator-side-sheet").find("#"+a)},updateSlotNode:function(a,
d,c){this.slotNode||(this.slotNode=this.domNode.find(q.SLOT_NODE_SELECTOR));this.showSlot!==a.showSlot&&((this.showSlot=a.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),this.isImageSwatch||f.updateSlotSectionInTextSwatch(this.domNode,this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==a.slotHtm&&(d&&t("#tp-inline-twister-sec-view-"+c+" #"+this.slotNode.attr("id")).html(a.slotHtm),this.slotNode.html(a.slotHtm),
this.slotHtm=a.slotHtm)},updateAvailablity:function(a){this.toggleButton||(this.toggleButton=this.domNode.find(q.TOGGLE_BUTTON_SELECTOR));(this.unavailable=a.unavailable)?this.toggleButton.addClass(m.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(m.A_BUTTON_UNAVAILABLE)},updateSelection:function(){this.toggleButton||(this.toggleButton=this.domNode.find(q.TOGGLE_BUTTON_SELECTOR));this.selected?(this.toggleButton.addClass(m.A_BUTTON_SELECTED),this.toggleButton.removeClass(m.A_BUTTON_UNAVAILABLE)):
(this.toggleButton.removeClass(m.A_BUTTON_SELECTED),this.toggleButton.removeClass(m.A_BUTTON_FOCUS))},updateVisibility:function(a){a.isVisible?this.domNode.removeClass(m.AOK_HIDDEN):this.domNode.addClass(m.AOK_HIDDEN);this.isVisible=a.isVisible},subscribeToHoverEvent:function(a){a="desktop-configurator-swatch-hover:"+a;try{b.declarative.remove(this.domNode,a),b.declarative.create(this.domNode,a,{})}catch(d){z.log("Hover event subscribe failed with error: "+this.name,x.ERROR,x.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(a){this.domNode&&
this.domNode.attr("data-idxInToggleSwatchList",a)},getTopPosition:function(){var a=this.domNode.position();return this.topPosition=a?a.top:0}};return c}(y),p=function(f,c){function a(a,c,f,g){var e=this;this.isTextSwatch=a.isTextSwatch;this.name=a.name;this.domNode=t(q.EXPANDER_CONTENT_PREFIX+a.name);this.title=g;this.selectedSwatch=null;this.swatches={};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRef/reshActive=!1;this.totalSwatchCount=a.totalSwatchCount||
0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=c.autoNotificationCallback;this.rowContainer=f;this.swatchListContainer=this.domNode.find(q.DIMENSION_VALUES_LIST);this.markAutoUpdated=!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;this.window/resizeCallback=c.window/resizeCallback;this.p/reserveNaturalSwatchOrder=a.p/reserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=t("#"+a.name).closest(q.SWATCH_NODE_SELECTOR);
this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();b.on("a:button-group:"+this.name+":toggle",function(a){var d=parseInt(a.selectedButton.buttonName,10),c=e.swatches[d];c?e.isPageRef/reshActive?(e.isUserInteracting=!0,d=c.unavailable,c.updateSelection(),e.autoNotificationCallback&&e.autoNotificationCallback(d,!0),e.onChange&&e.onChange(e.swatches,a.selectedButton,e.markAutoUpdated),e.setAutoUpdated(!1)):c.pageUrl&&(C.location.href=c.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+
d+" ; Swatch length: "+Object.keys(e.swatches).length,z.log(a,x.ERROR,x.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name+"_sec",!0);if(this.isTextSwatch)b.on("/resize",function(){0<e.displaySwatches.length&&(e.repopulateDisplaySwatches(),e.alignTextSwatches(),e.p/reserveNaturalSwatchOrder&&e.alignTextSwatchNodesInLastRow(),"function"===typeof e.window/resizeCallback&&e.window/resizeCallback(e.name))})}
a.prototype={setState:function(a,k,f,g){var e=this,p,m=[],l=[],q=[];b.objectIsEmpty(k)||(b.each(k,function(b,k){if(!e.swatches[k]&&(a.swatches[k].isVisible||f)){var g=new c(a.swatches[k],e.isTextSwatch,e.name,k,e.hideSlotsFromMainView,e.swatchPrototypeNode,e.swatchPrototypeNodeParent);g.subscribeToHoverEvent(e.name);e.swatches[k]=g;!e.isTextSwatch&&e.swatches[k]&&e.swatches[k].domNode&&q.push(e.swatches[k].domNode.find(".inline-twister-manual-load")[0])}l[b]=k}),this.swatchIdxOrder=l,g||(this./resetToggleSwatchContainer(),
this.displaySwatches=[]),b.each(this.swatchIdxOrder,function(a,d){if(a=e.swatches[a])a&&e.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(e.name),e.addToDisplaySwatches(a,e.displaySwatches)}));b.each(a.swatches,function(a,d){if(e.swatches[d])p=a.selected?e.swatches[d]:p,e.swatches[d].selected=!!a.selected,m.push({index:d,data:a});else{if(a.isVisible||f)e.swatches[d]=new c(a,e.isTextSwatch,e.name,d,e.hideSlotsFromMainView,e.swatchPrototypeNode,e.swatchPrototypeNodeParent),e.swatches[d].subscribeToHoverEvent(e.name),
e.addToDisplaySwatches(e.swatches[d],e.displaySwatches),!e.isTextSwatch&&e.swatches[d]&&e.swatches[d].domNode&&q.push(e.swatches[d].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(p=e.swatches[d])}});this.selectedSwatch&&this.selectedSwatch.updateSelection();p&&p.updateSelection();b.each(m,function(a,d){e.swatches[a.index].setState(a.data,f,e.name,a.index)});this.isTextSwatch&&(b.objectIsEmpty(k)?this.p/reserveNaturalSwatchOrder&&this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());
e.selectedSwatch&&p&&e.selectedSwatch!==p&&!e.isUserInteracting&&e.autoNotificationCallback(!0);e.selectedSwatch=p;e.isUserInteracting=!1;q.length&&b.loadImageManually(q);return this},getSlotNodes:function(a){return b.map(this.displaySwatches,function(c){return b.map(c,function(c){return c.getSlotNode(a)})})},setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,c){b.each(this.displaySwatches,function(b){f.alignTextSwatches(b,a,c)})},alignTextSwatchNodesInLastRow:function(){var a=
this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var c=a[a.length-1],n=a[a.length-2];c&&n&&c.getBoundingClientRect().top===n.getBoundingClientRect().top&&(a=b.map(a.slice(a.length-(a.length%this.numberOfSwatchesPerRow||this.numberOfSwatchesPerRow),a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),f.alignTextSwatches(a))}},/resetToggleSwatchContainer:function(){var a=t(this.domNode.find(".a-button-list").children()[0]);
this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;b.each(this.swatches,function(c,b){c.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,b){b=new c(a,this.isTextSwatch,
this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,b);this.swatches[a.name]=b;this.initialVisibleSwatchList[a.name]=b;this.selectedSwatch=a.selected?b:this.selectedSwatch;this.orderedSwatchList.push(b);return b},activatePageRef/resh:function(){this.isPageRef/reshActive=!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,c){var f=this;b.declarative(a,"mouseenter mouseleave",
function(a){var d=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),d=f.getSwatch(d);a.data={slotNode:a.$currentTarget.find(d.slotNodeIdentifier),showImageInPopOver:d.isImageSwatch&&!!d.popoverImage,unavailable:d.unavailable,showSlot:d.showSlot,selected:d.selected,title:d.title,name:d.name,id:c?d.id+"_sec":d.id,image:d.popoverImage};f.hoverHandler(f.name,a)})},addToDisplaySwatches:function(a,c){var b=m.ROW_IDENTIFIER_PREFIX;if(0===c.length)c.push([a]);else{var f=c[c.length-1];f&&f.length===
this.numberOfSwatchesPerRow?c.push([a]):f.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(b+(c.length-1).toString())},adjustSwatchWidthAndSpacing:function(){var a=this.getNumberOfSwatchesPerRow();if(this.totalSwatchCount>a){var c=this.displaySwatches[0][0].domNode,a=this.domNode.find(".a-button"),b=this.domNode[0].getBoundingClientRect().width-1,c=c.width(),f=this.getNumberOfSwatchesPerRow(),b=b-(c*f+(this.isTextSwatch?l.TEXT_SWATCH_MARGIN_RIGHT:0)*f);0<b&&(b=parseFloat(b/
f),a.width(c+b))}},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=[],c=0,f,g=this;b.each(this.displaySwatches,function(e,p){b.each(e,function(b,e){0===a.length?a.push([b]):0===c?(f=a[0][a[0].length-1],b.getTopPosition()!==f.getTopPosition()?(c=a[0].length,g.numberOfSwatchesPerRow=c,g.addToDisplaySwatches(b,a)):(a[0].push(b),g.removeSwatchRowIdentifier(b),b.domNode&&b.domNode.addClass(m.ROW_IDENTIFIER_PREFIX+(0).toString()))):g.addToDisplaySwatches(b,a)})});0===c&&(this.numberOfSwatchesPerRow=
c=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&a.domNode.removeClass(function(a,d){return(d.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||[]).join(" ")})},createDisplaySwatches:function(){var a=this;b.each(this.orderedSwatchList,function(c){a.addToDisplaySwatches(c,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],c=a[a.length-1],b=c.name;c.domNode&&c.domNode.remove();delete this.swatches[b];
this.selectedSwatch&&this.selectedSwatch.name===b&&(this.selectedSwatch=null);1<a.length?a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),c=a.length-1;0<=c;c--){var b=a[c];b.parentNode.removeChild(b)}}};return a}(y,w),v=function(f){function c(a){this.mainText=a.mainText;this.subText=a.subText;this.dimKey=a.dimKey;this.titleSelectorPrefix=a.titleSelectorPrefix;this.titleValueSelector=
a.titleValueSelector;this.domNode=t("#"+this.titleSelectorPrefix+this.dimKey)}c.prototype={ref/resh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},setState:function(a){return b.equals(a,t.extend({},this))?this:(t.extend(this,a),this.ref/resh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return c}(y),A=function(p,c,a){function d(a,
d,g,e,p){function l(){v=v||r.domNode.find(".dimension-heading");v.css(f.BG_COLOR,f.GREEN_BG_COLOR);b.delay(function(){b.animate(v,{"background-color":f.WHITE_BG_COLOR},200)},1E3)}var r=this;this.disableCollapseFunctionality=g.inlineTwisterData?g.inlineTwisterData.disableCollapseFunctionality:!1;this.stringTranslationMap=g.inlineTwisterData?g.inlineTwisterData.stringTranslationMap:{};this.title=d?new c(d):null;this.dimKey=g.dimKey;this.domNode=t("#"+a+this.dimKey);this.showSlot=g.showSlot;this.logger=
p;this.isTwisterCoreInitialized=this.isInlineExpanded=this.markAutoUpdated=!1;this.expanderContent=r.domNode.find(q.EXPANDER_CONTENT_PREFIX+this.dimKey);this.expanderHeader=r.domNode.find(q.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=r.domNode.find(q.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=r.domNode.find(q.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=r.domNode.find(q.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=e;this.autoNotificationExpanded=
r.domNode.find(q.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=r.autoNotificationExpanded.text();this.imageThumbnail=r.domNode.find(q.IMAGE_THUMBNAIL);this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.inlineExpansionLink=this.domNode.find(".tp-inline-expansion-link");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");var v;this.autoNotificationCallback=function(a,c){var d=r.autoNotificationExpandedText;a?r.isExpanded&&c?(r.autoNotificationExpanded.find("."+
m.A_COLOR_ATTAINABLE).html(d),r.autoNotificationExpanded.removeClass(m.AOK_HIDDEN)):(l(),r.setAutoUpdated(!0)):r.hideAutoNotification()};this.disableCollapseFunctionality||b.declarative("toggle-dimension-expander-"+this.dimKey,"click",function(a){r.isExpanded?r.collapse():r.expand();r.hideAutoNotification()})}d.prototype={setState:function(a,c,d,b,f,p){this.toggleSwatch&&d!==this.dimKey&&this.autoNotificationExpanded.addClass(m.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,c,f,p);
f||b&&this.title&&this.title.setState(b)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(m.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&this.icon.addClass(m.ROTATE);this.expandedText&&this.expandedText.removeClass(m.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(m.AOK_HIDDEN);this.imageThumbnail.addClass(m.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&
this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",c=this.title.getData(),a=a.replace("###dimension",c.mainText).replace("###value",c.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(q.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&
(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(m.DIMENSION_EXPANDER_CONTENT_EXPAND);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(m.ROTATE);this.expandedText&&this.expandedText.addClass(m.AOK_HIDDEN);this.collapsedText&&this.collapsedText.removeClass(m.AOK_HIDDEN);this.imageThumbnail.removeClass(m.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};
"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(m.AOK_HIDDEN);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",c=this.title.getData(),a=a.replace("###dimension",c.mainText).replace("###value",c.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",
a);this.expanderHeader.find(q.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,c){a=this.expanderHeader.attr("aria-label").replace(a.subText,c.subText);this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(q.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=p.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",
a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRef/resh:function(){this.toggleSwatch&&this.toggleSwatch.activatePageRef/resh()},showInlineExpansionLink:function(){this.inlineExpansionLink.removeClass("aok-hidden")},hideInlineExpansionLink:function(){this.inlineExpansionLink.addClass("aok-hidden")},
showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,c,d){var b=this;this.expanderContent.animate({"max-height":a+"px"},c,function(){b.setMaxHeight("");d&&d()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},createDisplaySwatches:function(){this.toggleSwatch&&
this.toggleSwatch.createDisplaySwatches()},adjustSwatchWidthAndSpacing:function(){this.toggleSwatch&&this.toggleSwatch.adjustSwatchWidthAndSpacing()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(m.AOK_HIDDEN)},initializeComponents:function(c,d,f){if(!this.toggleSwatch&&c){var e=this.title.getData();this.toggleSwatch=new a(c,{window/resizeCallback:f.handleWindow/resize,autoNotificationCallback:this.autoNotificationCallback},this.domNode,e.mainText)}this.isTextSwatch=c?c.isTextSwatch:
!0;this.rowCallbacks=b.extend(this.rowCallbacks,f);this.totalSwatchCount=c?c.totalSwatchCount:0;this.showSlot=d;var p=this;b.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof p.rowCallbacks.showSideSheet&&p.isTwisterCoreInitialized&&(p.rowCallbacks.showSideSheet(p.dimKey,p.showSlot,p.title.getData()),p.hideAutoNotification())});b.on("a:expander:desktop-configurator-inline-expansion:"+this.dimKey+":toggle:expand",function(){"function"===typeof p.rowCallbacks.toggleInlineExpansion&&
(p.rowCallbacks.toggleInlineExpansion(p.dimKey,p.showSlot,!0),p.hideAutoNotification(),p.isInlineExpanded=!0)});b.on("a:expander:desktop-configurator-inline-expansion:"+this.dimKey+":toggle:collapse",function(){"function"===typeof p.rowCallbacks.toggleInlineExpansion&&(p.rowCallbacks.toggleInlineExpansion(p.dimKey,p.showSlot,!1),p.hideAutoNotification(),p.isInlineExpanded=!1)})},postInitialize:function(){this.isTwisterCoreInitialized=!0;var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();
this.isExpanded&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)},handleSeeMoreIng/ress:function(a){var c=(this.toggleSwatch?this.toggleSwatch.getNumberOfSwatchesPerRow():0)*l.MAX_INLINE_ROWS;a<this.totalSwatchCount&&c>=this.totalSwatchCount&&(this.hideSideSheetLink(),this.showInlineExpansionLink())}};return d}(y,v,p);return{Swatch:w,ToggleSwatch:p,Title:v,Row:A,utils:y}});"use strict";z.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(b,l){function t(b){var f=
b.id&&"string"===typeof b.id,q=1===y("#"+b.id).length;if(f&&q)this.id=b.id,this.shouldRenderHTMLString=!!b.shouldRenderHTMLString,this.animationDuration=b.animationDuration||300,this.container=l.getContainer(b.id),this.onBefo/reshow=b.onBefo/reshow,this.onAfterHide=b.onAfterHide,f=b.width||580,(q=this.container)&&q.width(f),x(b.id,f),m.call(this);else throw b="Side sheet initialisation failed: "+(f?"Side sheet not p/resent in DOM, or multiple instances of side sheet ID "+b.id+" exist":"Invalid Side sheet ID"),
z.log(b,"ERROR","DetailPageSideSheet"),b;}function q(b){var f=this.container;b=this.shouldRenderHTMLString?y(b):y(b).clone();f.html(b);b.css("display","block");f.removeClass("aok-hidden")}function m(){var f=this;b.declarative("close-detail-page-side-sheet:"+this.id,"click",function(){f.close()});b.declarative("open-detail-page-side-sheet:"+this.id,"click",function(b){f.open(b&&b.data?b.data.content:null)})}function f(b){b.code&&"escape"===b.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",
w))}function x(b,f){b=y("#"+b+"-background .close-button");b.length&&(b[0].style.marginRight=f+10+"px")}var y=b.$,w=null;t.prototype={open:function(b){if(b&&"string"===typeof b){q.call(this,b);if(this.onBefo/reshow)this.onBefo/reshow();l.showSideSheet(this.id,this.animationDuration);w=f.bind(this);document&&document.addEventListener("keydown",w)}else z.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){l.closeSideSheet(this.id,this.animationDuration);
l./resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(b){var f=this.container;f&&f.width(b);x(this.id,b)},updateContent:function(b){b&&"string"===typeof b?q.call(this,b):z.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")}};return t});"use strict";z.when("A").register("detail-page-side-sheet-handlers",function(b){function l(b,l){m("#"+b+" .detail-page-side-sheet-content").show(function(){q({right:"0px"},b,l)})}
function t(b,l){m("#"+b+" .detail-page-side-sheet-content").show(function(){q({right:"-600px"},b,l)})}function q(f,l,q){b.animate(m("#"+l+" .detail-page-side-sheet-content"),f,q)}var m=b.$;return{showSideSheet:function(b,q){m("body").css("overflow","hidden");m(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");m("#"+b).removeClass("aok-hidden");l(b,q)},closeSideSheet:function(b,l){t(b,l);m(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");m("#"+b).addClass("aok-hidden");m("body").css("overflow",
"scroll")},getContainer:function(b){return m("#"+b).find(".detail-page-side-sheet-content")},/resetSideSheetContainer:function(b){b.html("")}}})});